<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/head :: head">
    <title id="pageTitle">Perfume Transactions</title>
</head>
<body>
<nav th:replace="fragments/navHeader :: navbar"></nav>

<div class="container my-4 w-75 mx-auto">

    <h2 class="mb-3 text-center title">Perfume Transaction List</h2>

    <h2 class="mb-3 text-center error" th:if="${not #strings.isEmpty(messageError)}" th:text="${messageError}"></h2>
    <h2 class="mb-3 text-center success" th:if="${not #strings.isEmpty(messageSuccess)}"
        th:text="${messageSuccess}"></h2>


    <!--Search by customer name and perfume choice-->


    <div class="container my-4 w-75 mx-auto p-4">

        <div class="row justify-content-center mb-4">

            <form th:object="${perfumeTransaction}" th:action="@{/perfumetransaction/search}" method="post"
                  class="col-12 text-center">

                <div class="d-inline-flex flex-wrap align-items-center justify-content-center gap-3">

                    <div class="input-group" style="max-width: 300px;">
                        <span class="input-group-text">Customer Name:</span>
                        <input type="text" th:field="*{customerName}" class="form-control"/>
                    </div>

                    <div class="input-group" style="max-width: 300px;">
                        <span class="input-group-text">Perfume Choice:</span>
                        <input type="text" th:field="*{perfumeChoice}" class="form-control"/>
                    </div>

                    <button type="submit" class="btn btn-primary mt-2 mt-sm-0">Search</button>

                </div>
            </form>
        </div>


        <div class="table-responsive">
            <!--<table id="theData" class="perfume-table table-striped table-hover align-middle">-->
            <table id="theData" class="perfume-table table-striped table-hover align-middle w-100">
                <thead class="table-dark text-center">
                <tr>
                    <th>ID</th>
                    <th>Date</th>
                    <th>Customer Name</th>
                    <th>Phone</th>
                    <th>Perfume</th>
                    <th>Size</th>
                    <th>Price</th>
                    <th>Qty</th>
                    <th>Total</th>
                    <th>Options</th>
                </tr>
                </thead>

                <tbody>
                <tr th:each="current : ${perfumeTransactions}">
                    <td th:text="${current.id}"></td>
                    <td th:text="${current.transactionDate}"></td>
                    <td th:text="${current.customerName}"></td>
                    <td th:text="${current.phoneNumber}"></td>
                    <td th:text="${current.perfumeChoice}"></td>
                    <td th:text="${current.perfumeSize}"></td>
                    <td th:text="${current.pricePerBottle}"></td>
                    <td th:text="${current.quantity}"></td>
                    <td th:text="${current.total}"></td>

                    <td class="text-center">
                        <div class="btn-group" role="group">
                            <a th:href="@{/perfumetransaction/edit/{id}(id=${current.id})}"
                               class="btn btn-sm btn-outline-primary" title="Edit">
                                Edit
                            </a>
                            <a th:href="@{/perfumetransaction/delete/{id}(id=${current.id})}"
                               class="btn btn-sm btn-outline-danger" title="Delete"
                               onclick="return confirm('Are you sure?');">
                                Delete
                            </a>
                        </div>
                    </td>
                </tr>

                <tr th:if="${#lists.isEmpty(perfumeTransactions)}">
                    <td colspan="10" class="text-center text-muted py-4">
                        No transactions found.
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <div class="text-center mt-3">
            <a th:href="@{/perfumetransaction/add}" class="btn btn-success">
                Add New Record
            </a>
        </div>
    </div>
    <footer th:replace="fragments/footer :: footer"></footer>
</body>
</html>